@model Commencement.Controllers.ViewModels.StudentDisplayRegistrationViewModel

@{
    ViewBag.Title = "DisplayRegistrationNew";
    Layout = "~/Views/Shared/_StudentLayout.cshtml";
}

<div class="pull-right">
    @Html.Partial("_LogonPartial")
    @if (Model.CanEditRegistration)
    {
        @Html.ActionLink("Edit Registration", "EditRegistration", "Student", new {Model.Registration.Id}, htmlAttributes: new { @class = "btn btn-18 btn-blue" })
    }
    @if (Model.CanPetitionForExtraTickets)
    {
        @Html.ActionLink("Extra Ticket Petition", "ExtraTicketPetition", "Petition", new { Model.Registration.Id }, htmlAttributes: new { @class = "btn btn-18 btn-blue" })
    }
</div>

<div class="banner banner--register">
    <div class="banner_contents">
        <img src="@Url.Content("~/Images/Media/commencement_welcome.svg")" alt="">
    </div>
</div>

<div class="studentbar">
    <div class="studentbar__contents">
        <div class="studentbar--item">
            <p><b>Name:</b> @Model.Registration.Student.FullName</p>
        </div>
        @*<div class="studentbar--item">
            <p><b>Email:</b> @Model.Registration.Student.Email</p>
        </div>*@
        <div class="studentbar--item">
            <p><b>Student ID:</b> @Model.Registration.Student.StudentId</p>
        </div>
        <div class="studentbar--item">
            <p><b>Units:</b> @Model.Registration.Student.TotalUnits</p>
        </div>
        <div class="studentbar--item">
            <p><b>Major(s):</b> @Model.Registration.Student.ActualStrMajors</p>
        </div>
    </div>
</div>

<div class="main">
    <div class="main_contents">
        <div class="register__section">
            <h2>Contact Information</h2>
            <div class="form__wrapper">
                <div class="input__group">
                    <label>Address Line 1</label>
                    
                    @Html.DisplayFor(a => a.Registration.Address1)
                </div>
                <div class="input__group">
                    <label>Address Line 2</label>
                    @Html.DisplayFor(a => a.Registration.Address2)

                </div>
                <div class="input__group">
                    <label>City</label>
                    @Html.DisplayFor(a => a.Registration.City)
                </div>
                <div class="input__group">
                    <label>State</label>
                    @Html.DisplayFor(a => a.Registration.State.Name)
                </div>
                <div class="input__group">
                    <label>Zip Code</label>
                    @Html.DisplayFor(x => x.Registration.Zip)
                </div>
                <div class="input__group">
                    <label>Email Address</label>
                    @Html.DisplayFor(x => x.Registration.Student.Email)
                </div>
                <div class="input__group">
                    <label>Ticket Password</label>
                    @Html.DisplayFor(x => x.Registration.TicketPassword)
                </div>
                <div class="input__group">
                    <label>Additional Recipients Email</label>
                    @Html.DisplayFor(x => x.Registration.Email)
                </div>
                <div class="input__group">
                    <label>How To Say Your Name Phonetically</label>
                    @Html.DisplayFor(x => x.Registration.Phonetic)
                </div>
                <div class="input__group">
                    <label>Special Needs</label>
                    @string.Join(", ", Model.Registration.SpecialNeeds.Select(a => a.Name))
                </div>
            </div>
        </div>
        
        @if (Model.Registration.RegistrationParticipations.Count > 0)
        {
            <div class="register__section">
                <h2>Registered @(Model.Registration.RegistrationParticipations.Count == 1 ? "Ceremony" : "Ceremonies")</h2>
                @foreach (var a in Model.Registration.RegistrationParticipations)
                {
                    if (DateTime.Now.Subtract(a.DateRegistered).TotalDays <= 2) //TODO: UTC this. Plus prior to the cloud this was 2 minutes which might not be good if the survey takes longer.
                    {
                        //TODO style this div?
                        <div>
                            @Html.Raw(a.Ceremony.ConfirmationText)
                        </div>
                    }
                    @Html.Partial("_RegisteredCeremonyDisplay", a)
                }
            </div>
        }
        
        
        @if (Model.Registration.RegistrationPetitions.Count > 0)
        {
            <div class="register__section">
                <h2>Petitioned @(Model.Registration.RegistrationPetitions.Count == 1 ? "Ceremony" : "Ceremonies")</h2>
            </div>
            foreach (var a in Model.Registration.RegistrationPetitions)
            {
                @Html.Partial("_RegistrationPetitionDisplay", a)
            }
        }
                

    </div>
</div>
